<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8" />
	<title>Object Prototypes | Home Page</title>
	<meta name="viewport" content="width=device-width, initial-scale=1.0" />

	<style>
	image{
		height: 150px;
		width: auto;
		float:right;
	}
	paragraph{
		border-bottom: solid 2px black;
	}
	</style>
</head>

<body>
	<header>

	</header>
	<section>

	</section>
	<script>
		var header = document.querySelector('header');
		var section = document.querySelector('section');
		var req = new XMLHttpreq();
		req.open('GET', reqURL);
		req.responseType = 'json';
		req.send();
		req.onload = function() {
			var topDeals = req.response;
			console.log(topDeals);
			populateHeader(topDeals);
			topDealss(topDeals);
		}
		function populateHeader(jsonObj){
			var headerH1 = document.createElement('h1');
			headerH1.textContent = jsonObj['HeadOffice'];
			header.appendChild(headerH1);
			var headerP = document.createElement('p');
			headerP.textContent = 'Head Office: ' + jsonObj['HeadOffice'] + ', Located At: ' + jsonObj['HeadOfficeLocation'];
			header.appendChild(headerP);
		}
		function topDealss(jsonObj){
			var topProducts = jsonObj['topDeals'];
			for (var i = 0; i < topProducts.length; i++) {
				var paragraph = document.createElement('paragraph');
				var h2 = document.createElement('h2');
				var image = document.createElement('image');
				var p1 = document.createElement('p');
				var p2 = document.createElement('p');
				var list = document.createElement('ul');
				image.setAttribute('src', 'https://purva18.github.io/Project_4/images/' + topProducts[i].image);
				image.setAttribute('alt', topProducts[i].name);
				h2.textContent = topProducts[i].name;
				p1.textContent = 'Price: $' + topProducts[i].price;
				p2.textContent = 'description: ' + topProducts[i].description;
				var fectures = topProducts[i].fectures;
				for (var j = 0; j < fectures.length; j++) {
					var listItem = document.createElement('li');
					listItem.textContent = fectures[j];
					list.appendChild(listItem);
				}

				paragraph.appendChild(image);
				paragraph.appendChild(h2);
				paragraph.appendChild(p1);
				paragraph.appendChild(p2);
				paragraph.appendChild(list);
				section.appendChild(paragraph);
				}
			}
	
		</script>
	</body>
</html>